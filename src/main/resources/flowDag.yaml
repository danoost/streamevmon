sources:
  amp:
    type: influx
    subtype: amp
    config:
      serverName: 192.168.122.144
      subscriptionName: YamlDagRunnerAmpSubscription
  bigdata:
    type: influx
    subtype: bigdata
    config:
      serverName: 192.168.122.144
      subscriptionName: YamlDagRunnerEsmondSubscription
  esmond:
    type: esmond
    config:
      serverName: http://denv-owamp.es.net:8085

sinks:
  print:
    type: print
  influx:
    type: influx
    config:
      serverName: 192.168.122.144

instanceTemplates: &ampIcmpToAllSources
  - source:
      - name: amp
        datatype: icmp
        filterLossy: true
    sink:
      - name: influx
      - name: print

detectors:
  baseline-icmp:
    type: baseline
    instances:
      - source:
          - name: amp
            datatype: icmp
            filterLossy: true
        sink:
          - name: influx
          - name: print
        config:
          threshold: 60

  changepoint-icmp:
    type: changepoint
    instances: *ampIcmpToAllSources

  distdiff-esmond:
    type: distdiff
    instances:
      - source:
          - name: esmond
            datatype: simple
            filterLossy: true
        sink:
          - name: influx
          - name: print

  loss:
    type: loss
    instances:
      - source:
          - name: amp
            datatype: dns
        sink:
          - name: influx
          - name: print
        config:
      - source:
          - name: amp
            datatype: icmp
        sink:
          - name: influx
          - name: print

  mode-icmp:
    type: mode
    instances: *ampIcmpToAllSources

  spike-icmp:
    type: spike
    instances: *ampIcmpToAllSources
